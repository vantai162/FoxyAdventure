[gd_scene load_steps=26 format=3 uid="uid://bxfs4fsx7ot6m"]

[ext_resource type="Script" uid="uid://dlg2emkwgklma" path="res://enemy/starfish/starfish.gd" id="1_chqr0"]
[ext_resource type="Texture2D" uid="uid://div7ykrnkcmbm" path="res://assets/monsters/starfish/starfish_atk_01.png" id="2_fpeau"]
[ext_resource type="Texture2D" uid="uid://b7fyajqfeium5" path="res://assets/monsters/starfish/starfish_atk_02.png" id="3_mh1l4"]
[ext_resource type="Texture2D" uid="uid://kkpwv3jqgs40" path="res://assets/monsters/starfish/starfish_atk_03.png" id="4_kc2lg"]
[ext_resource type="Texture2D" uid="uid://brx56liv83bir" path="res://assets/monsters/starfish/starfish_atk_04.png" id="5_jgd0b"]
[ext_resource type="Texture2D" uid="uid://bauqbopb4s1be" path="res://assets/monsters/starfish/starfish_atk_05.png" id="6_chqr0"]
[ext_resource type="Texture2D" uid="uid://77tvy0q7r4ec" path="res://assets/monsters/starfish/starfish_atk_06.png" id="7_s0u86"]
[ext_resource type="Texture2D" uid="uid://bohjxisajkyem" path="res://assets/monsters/starfish/starfish_hurt_01.png" id="8_qrjr3"]
[ext_resource type="Texture2D" uid="uid://8usoreyem8l6" path="res://assets/foxy/smoke/jump_smoke_1.png" id="8_w8tu1"]
[ext_resource type="Texture2D" uid="uid://dm4exe7w2fi23" path="res://assets/monsters/starfish/starfish_hurt_02.png" id="9_10osh"]
[ext_resource type="Texture2D" uid="uid://jtpy308mqnwi" path="res://assets/foxy/smoke/jump_smoke_2.png" id="9_naonh"]
[ext_resource type="Texture2D" uid="uid://cbk136ktae42o" path="res://assets/foxy/smoke/jump_smoke_3.png" id="10_06xrr"]
[ext_resource type="Texture2D" uid="uid://c1k5spj3k7htj" path="res://assets/monsters/starfish/starfish_01.png" id="10_w8tu1"]
[ext_resource type="Texture2D" uid="uid://c8cs1hwh7venp" path="res://assets/foxy/smoke/jump_smoke_4.png" id="11_coy4h"]
[ext_resource type="Texture2D" uid="uid://cqc7ruwipvqko" path="res://assets/monsters/starfish/starfish_02.png" id="11_naonh"]
[ext_resource type="Texture2D" uid="uid://dejbsdoig628p" path="res://assets/monsters/starfish/starfish_03.png" id="12_06xrr"]
[ext_resource type="Script" uid="uid://xqvgljx4hk1s" path="res://scripts/hit_area_2d.gd" id="14_jmb5p"]
[ext_resource type="Script" uid="uid://bmohdbn74hvul" path="res://enemy/starfish/states/run.gd" id="15_s0u86"]
[ext_resource type="Script" uid="uid://jcw10mo6pgth" path="res://enemy/starfish/states/hurt.gd" id="16_qrjr3"]
[ext_resource type="Script" uid="uid://ym7l8lknvi2o" path="res://enemy/starfish/states/attack.gd" id="17_10osh"]
[ext_resource type="PackedScene" uid="uid://ct1tqxgwkuvbe" path="res://scripts/hurt_area_2d.tscn" id="18_naonh"]
[ext_resource type="Script" uid="uid://8nk1e0hupl7j" path="res://enemy/starfish/states/dead.gd" id="18_w8tu1"]

[sub_resource type="SpriteFrames" id="SpriteFrames_hanlh"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_fpeau")
}, {
"duration": 1.0,
"texture": ExtResource("3_mh1l4")
}, {
"duration": 1.0,
"texture": ExtResource("4_kc2lg")
}, {
"duration": 1.0,
"texture": ExtResource("5_jgd0b")
}, {
"duration": 1.0,
"texture": ExtResource("6_chqr0")
}, {
"duration": 1.0,
"texture": ExtResource("7_s0u86")
}],
"loop": true,
"name": &"attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_w8tu1")
}, {
"duration": 1.0,
"texture": ExtResource("9_naonh")
}, {
"duration": 1.0,
"texture": ExtResource("10_06xrr")
}, {
"duration": 1.0,
"texture": ExtResource("11_coy4h")
}],
"loop": false,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_qrjr3")
}, {
"duration": 1.0,
"texture": ExtResource("9_10osh")
}],
"loop": false,
"name": &"hurt",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_w8tu1")
}, {
"duration": 1.0,
"texture": ExtResource("11_naonh")
}, {
"duration": 1.0,
"texture": ExtResource("12_06xrr")
}],
"loop": true,
"name": &"run",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sp3cf"]
size = Vector2(28, 31)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_w8tu1"]
size = Vector2(21, 26)

[node name="Starfish" type="CharacterBody2D"]
collision_layer = 8
script = ExtResource("1_chqr0")
metadata/_custom_type_script = "uid://s4xx82espxdt"

[node name="Direction" type="Node2D" parent="."]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Direction"]
sprite_frames = SubResource("SpriteFrames_hanlh")
animation = &"run"

[node name="FrontRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(9, -4)
target_position = Vector2(12, 0)
collision_mask = 9

[node name="DownRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(14, -4)
target_position = Vector2(0, 29)

[node name="HitArea2D" type="Area2D" parent="Direction"]
collision_layer = 0
collision_mask = 4
script = ExtResource("14_jmb5p")
metadata/_custom_type_script = "uid://xqvgljx4hk1s"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Direction/HitArea2D"]
position = Vector2(-2, -1.5)
shape = SubResource("RectangleShape2D_sp3cf")

[node name="DetectPlayerRayCast2D" type="RayCast2D" parent="Direction"]
target_position = Vector2(100, 0)
collision_mask = 3

[node name="HurtArea2D" parent="Direction" instance=ExtResource("18_naonh")]
collision_layer = 80
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Direction/HurtArea2D"]
position = Vector2(-2, -1.5)
shape = SubResource("RectangleShape2D_sp3cf")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(-1.5, 2)
shape = SubResource("RectangleShape2D_w8tu1")

[node name="States" type="Node" parent="."]

[node name="Run" type="Node" parent="States"]
script = ExtResource("15_s0u86")

[node name="Hurt" type="Node" parent="States"]
script = ExtResource("16_qrjr3")

[node name="Attack" type="Node" parent="States"]
script = ExtResource("17_10osh")

[node name="Dead" type="Node" parent="States"]
script = ExtResource("18_w8tu1")

[connection signal="hurt" from="Direction/HurtArea2D" to="." method="_on_hurt_area_2d_hurt"]
